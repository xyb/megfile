

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>megfile.s3_path module &mdash; megfile  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="megfile.smart module" href="megfile.smart.html" />
    <link rel="prev" title="megfile.s3 module" href="megfile.s3.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> megfile
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="megfile.html">megfile package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="megfile.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="megfile.fs.html">megfile.fs module</a></li>
<li class="toctree-l3"><a class="reference internal" href="megfile.fs_path.html">megfile.fs_path module</a></li>
<li class="toctree-l3"><a class="reference internal" href="megfile.s3.html">megfile.s3 module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">megfile.s3_path module</a></li>
<li class="toctree-l3"><a class="reference internal" href="megfile.smart.html">megfile.smart module</a></li>
<li class="toctree-l3"><a class="reference internal" href="megfile.smart_path.html">megfile.smart_path module</a></li>
<li class="toctree-l3"><a class="reference internal" href="megfile.http.html">megfile.http module</a></li>
<li class="toctree-l3"><a class="reference internal" href="megfile.http_path.html">megfile.http_path module</a></li>
<li class="toctree-l3"><a class="reference internal" href="megfile.stdio.html">megfile.stdio module</a></li>
<li class="toctree-l3"><a class="reference internal" href="megfile.stdio_path.html">megfile.stdio_path module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="megfile.html#module-megfile">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme.html">README</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/megvii-research/megfile">GitHub</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">megfile</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="megfile.html">megfile package</a> &raquo;</li>
        
      <li>megfile.s3_path module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/megfile.s3_path.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="megfile-s3-path-module">
<h1>megfile.s3_path module<a class="headerlink" href="#megfile-s3-path-module" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-megfile.s3_path"></span><dl class="py class">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">megfile.s3_path.</span></span><span class="sig-name descname"><span class="pre">S3Path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">os.PathLike</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">other_paths</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">os.PathLike</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/megfile/s3_path.html#S3Path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.s3_path.S3Path" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">megfile.pathlike.URIPath</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.access">
<span class="sig-name descname"><span class="pre">access</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">megfile.pathlike.Access</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">Access.READ</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.access" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if path has access permission described by mode
Using head_bucket(), now READ/WRITE are same.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s3_url</strong> – Path to be tested</p></li>
<li><p><strong>mode</strong> – access mode</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bool, if the bucket of s3_url has read/write access.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dst_url</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">os.PathLike</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>File copy on S3
Copy content of file on <cite>src_path</cite> to <cite>dst_path</cite>.
It’s caller’s responsebility to ensure the s3_isfile(src_url) == True</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_path</strong> – Source file path</p></li>
<li><p><strong>dst_path</strong> – Target file path</p></li>
<li><p><strong>callback</strong> – Called periodically during copy, and the input parameter is the data size (in bytes) of copy since the last call</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.exists">
<span class="sig-name descname"><span class="pre">exists</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if s3_url exists</p>
<p>If the bucket of s3_url are not permitted to read, return False</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – Path to be tested</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if s3_url eixsts, else False</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.getmtime">
<span class="sig-name descname"><span class="pre">getmtime</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.getmtime" title="Permalink to this definition">¶</a></dt>
<dd><p>Get last-modified time of the file on the given s3_url path (in Unix timestamp format).
If the path is an existent directory, return the latest modified time of all file in it. The mtime of empty directory is 1970-01-01 00:00:00</p>
<p>If s3_url is not an existent path, which means s3_exist(s3_url) returns False, then raise S3FileNotFoundError</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s3_url</strong> – Given s3 path</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Last-modified time</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>S3FileNotFoundError, UnsupportedError</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.getsize">
<span class="sig-name descname"><span class="pre">getsize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.getsize" title="Permalink to this definition">¶</a></dt>
<dd><p>Get file size on the given s3_url path (in bytes).
If the path in a directory, return the sum of all file size in it, including file in subdirectories (if exist).
The result exludes the size of directory itself. In other words, return 0 Byte on an empty directory path.</p>
<p>If s3_url is not an existent path, which means s3_exist(s3_url) returns False, then raise S3FileNotFoundError</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s3_url</strong> – Given s3 path</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>File size</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>S3FileNotFoundError, UnsupportedError</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.glob">
<span class="sig-name descname"><span class="pre">glob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.glob" title="Permalink to this definition">¶</a></dt>
<dd><p>Return s3 path list in ascending alphabetical order, in which path matches glob pattern
Notes：Only glob in bucket. If trying to match bucket with wildcard characters, raise UnsupportedError</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s3_pathname</strong> – May contain shell wildcard characters</p></li>
<li><p><strong>recursive</strong> – If False，<cite>**</cite> will not search directory recursively</p></li>
<li><p><strong>missing_ok</strong> – If False and target path doesn’t match any file, raise FileNotFoundError</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>UnsupportedError, when bucket part contains wildcard characters</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list contains paths match <cite>s3_pathname</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.glob_stat">
<span class="sig-name descname"><span class="pre">glob_stat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">megfile.pathlike.FileEntry</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.glob_stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a generator contains tuples of path and file stat, in ascending alphabetical order, in which path matches glob pattern
Notes：Only glob in bucket. If trying to match bucket with wildcard characters, raise UnsupportedError</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s3_pathname</strong> – May contain shell wildcard characters</p></li>
<li><p><strong>recursive</strong> – If False，<cite>**</cite> will not search directory recursively</p></li>
<li><p><strong>missing_ok</strong> – If False and target path doesn’t match any file, raise FileNotFoundError</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>UnsupportedError, when bucket part contains wildcard characters</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A generator contains tuples of path and file stat, in which paths match <cite>s3_pathname</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.iglob">
<span class="sig-name descname"><span class="pre">iglob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.iglob" title="Permalink to this definition">¶</a></dt>
<dd><p>Return s3 path iterator in ascending alphabetical order, in which path matches glob pattern
Notes：Only glob in bucket. If trying to match bucket with wildcard characters, raise UnsupportedError</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s3_pathname</strong> – May contain shell wildcard characters</p></li>
<li><p><strong>recursive</strong> – If False，<cite>**</cite> will not search directory recursively</p></li>
<li><p><strong>missing_ok</strong> – If False and target path doesn’t match any file, raise FileNotFoundError</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>UnsupportedError, when bucket part contains wildcard characters</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An iterator contains paths match <cite>s3_pathname</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.is_dir">
<span class="sig-name descname"><span class="pre">is_dir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.is_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if an s3 url is directory
Specific procedures are as follows:
If there exists a suffix, of which <code class="docutils literal notranslate"><span class="pre">os.path.join(s3_url,</span> <span class="pre">suffix)</span></code> is a file
If the url is empty bucket or s3://</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s3_url</strong> – Path to be tested</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if path is s3 directory, else False</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.is_file">
<span class="sig-name descname"><span class="pre">is_file</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.is_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if an s3_url is file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s3_url</strong> – Path to be tested</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if path is s3 file, else False</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.listdir">
<span class="sig-name descname"><span class="pre">listdir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.listdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all contents of given s3_url. The result is in acsending alphabetical order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s3_url</strong> – Given s3 path</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>All contents have prefix of s3_url in acsending alphabetical order</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>S3FileNotFoundError, S3NotADirectoryError</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">BinaryIO</span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Read all content in binary on specified path and write into memory</p>
<p>User should close the BinaryIO manually</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s3_url</strong> – Specified path</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>BinaryIO</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.md5">
<span class="sig-name descname"><span class="pre">md5</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.md5" title="Permalink to this definition">¶</a></dt>
<dd><p>Get md5 meta info in files that uploaded/copied via megfile</p>
<p>If meta info is lost or non-existent, return None</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s3_url</strong> – Specified path</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>md5 meta info</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.mkdir">
<span class="sig-name descname"><span class="pre">mkdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exist_ok</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#megfile.s3_path.S3Path.mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an s3 directory.
Purely creating directory is invalid because it’s unavailable on OSS.
This function is to test the target bucket have WRITE access.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s3_url</strong> – Given path</p></li>
<li><p><strong>exist_ok</strong> – If False and target directory exists, raise S3FileExistsError</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>S3BucketNotFoundError, S3FileExistsError</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.move">
<span class="sig-name descname"><span class="pre">move</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dst_url</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">os.PathLike</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.move" title="Permalink to this definition">¶</a></dt>
<dd><p>Move file/directory path from src_url to dst_url</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_url</strong> – Given source path</p></li>
<li><p><strong>dst_url</strong> – Given destination path</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.open">
<span class="sig-name descname"><span class="pre">open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">mode:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'r',</span> <span class="pre">*,</span> <span class="pre">s3_open_func:</span> <span class="pre">Callable[[str,</span> <span class="pre">str],</span> <span class="pre">BinaryIO]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">s3_buffered_open&gt;,</span> <span class="pre">**kwargs</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">IO</span><span class="p"><span class="pre">[</span></span><span class="pre">AnyStr</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/megfile/s3_path.html#S3Path.open"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.s3_path.S3Path.open" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.protocol">
<span class="sig-name descname"><span class="pre">protocol</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'s3'</span></em><a class="headerlink" href="#megfile.s3_path.S3Path.protocol" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the file or directory on s3, <cite>s3://</cite> and <cite>s3://bucket</cite> are not permitted to remove</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s3_url</strong> – Given path</p></li>
<li><p><strong>missing_ok</strong> – if False and target file/directory not exists, raise S3FileNotFoundError</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>S3PermissionError, S3FileNotFoundError, UnsupportedError</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.rename">
<span class="sig-name descname"><span class="pre">rename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dst_url</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">os.PathLike</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.rename" title="Permalink to this definition">¶</a></dt>
<dd><p>Move s3 file path from src_url to dst_url</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_url</strong> – Given source path</p></li>
<li><p><strong>dst_url</strong> – Given destination path</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.rmdir">
<span class="sig-name descname"><span class="pre">rmdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.rmdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the file or directory on s3, <cite>s3://</cite> and <cite>s3://bucket</cite> are not permitted to remove</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s3_url</strong> – Given path</p></li>
<li><p><strong>missing_ok</strong> – if False and target file/directory not exists, raise S3FileNotFoundError</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>S3PermissionError, S3FileNotFoundError, UnsupportedError</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_object</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">BinaryIO</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/megfile/s3_path.html#S3Path.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#megfile.s3_path.S3Path.save" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.scan">
<span class="sig-name descname"><span class="pre">scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Iteratively traverse only files in given s3 directory, in alphabetical order.
Every iteration on generator yields a path string.</p>
<p>If s3_url is a file path, yields the file only
If s3_url is a non-existent path, return an empty generator
If s3_url is a bucket path, return all file paths in the bucket
If s3_url is an empty bucket, return an empty generator
If s3_url doesn’t contain any bucket, which is s3_url == ‘s3://’, raise UnsupportedError. walk() on complete s3 is not supported in megfile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – An s3 path</p></li>
<li><p><strong>missing_ok</strong> – If False and there’s no file in the directory, raise FileNotFoundError</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>UnsupportedError</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A file path generator</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.scan_stat">
<span class="sig-name descname"><span class="pre">scan_stat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">megfile.pathlike.FileEntry</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.scan_stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Iteratively traverse only files in given directory, in alphabetical order.
Every iteration on generator yields a tuple of path string and file stat</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Given s3_url</p></li>
<li><p><strong>missing_ok</strong> – If False and there’s no file in the directory, raise FileNotFoundError</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>UnsupportedError</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A file path generator</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.scandir">
<span class="sig-name descname"><span class="pre">scandir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">megfile.pathlike.FileEntry</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.scandir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all contents of given s3_url, the order of result is not guaranteed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s3_url</strong> – Given s3 path</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>All contents have prefix of s3_url</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>S3FileNotFoundError, S3NotADirectoryError</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.stat">
<span class="sig-name descname"><span class="pre">stat</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="megfile.fs.html#megfile.fs.StatResult" title="megfile.pathlike.StatResult"><span class="pre">megfile.pathlike.StatResult</span></a></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Get StatResult of s3_url file, including file size and mtime, referring to s3_getsize and s3_getmtime</p>
<p>If s3_url is not an existent path, which means s3_exist(s3_url) returns False, then raise S3FileNotFoundError
If attempt to get StatResult of complete s3, such as s3_dir_url == ‘s3://’, raise UnsupportedError</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s3_url</strong> – Given s3 path</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>StatResult</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>S3FileNotFoundError, UnsupportedError</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.sync">
<span class="sig-name descname"><span class="pre">sync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dst_url</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">os.PathLike</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.sync" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy file/directory on src_url to dst_url</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_url</strong> – Given source path</p></li>
<li><p><strong>dst_url</strong> – Given destination path</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.unlink">
<span class="sig-name descname"><span class="pre">unlink</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">missing_ok</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.unlink" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the file on s3</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s3_url</strong> – Given path</p></li>
<li><p><strong>missing_ok</strong> – if False and target file not exists, raise S3FileNotFoundError</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>S3PermissionError, S3FileNotFoundError, S3IsADirectoryError</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="megfile.s3_path.S3Path.walk">
<span class="sig-name descname"><span class="pre">walk</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#megfile.s3_path.S3Path.walk" title="Permalink to this definition">¶</a></dt>
<dd><p>Iteratively traverse the given s3 directory, in top-bottom order. In other words, firstly traverse parent directory, if subdirectories exist, traverse the subdirectories in alphabetical order.
Every iteration on generator yields a 3-tuple：(root, dirs, files)</p>
<ul class="simple">
<li><p>root: Current s3 path;</p></li>
<li><p>dirs: Name list of subdirectories in current directory. The list is sorted by name in ascending alphabetical order;</p></li>
<li><p>files: Name list of files in current directory. The list is sorted by name in ascending alphabetical order;</p></li>
</ul>
<p>If s3_url is a file path, return an empty generator
If s3_url is a non-existent path, return an empty generator
If s3_url is a bucket path, bucket will be the top directory, and will be returned at first iteration of generator
If s3_url is an empty bucket, only yield one 3-tuple (notes: s3 doesn’t have empty directory)
If s3_url doesn’t contain any bucket, which is s3_url == ‘s3://’, raise UnsupportedError. walk() on complete s3 is not supported in megfile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – An s3 path</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>UnsupportedError</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A 3-tuple generator</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="megfile.smart.html" class="btn btn-neutral float-right" title="megfile.smart module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="megfile.s3.html" class="btn btn-neutral float-left" title="megfile.s3 module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, r-eng.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>